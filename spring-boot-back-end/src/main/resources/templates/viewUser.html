
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Users List</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet">
</head>
<body class="bg-light">

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow">
    <div class="container">
        <a class="navbar-brand fw-bold" href="/">Manish</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div id="navbarNav" class="collapse navbar-collapse">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="/">Home</a></li>
                <li class="nav-item"><a class="nav-link active" href="/form">Add User</a></li>
                <li class="nav-item"><a class="nav-link" href="/users">View Users</a></li>
                <li class="nav-item"><a class="nav-link" href="/about">About</a></li>
            </ul>
        </div>
    </div>
</nav>



<!-- User Table -->
<div th:if="${!#lists.isEmpty(users)}" class="table-responsive">
    <table class="table table-hover align-middle">
        <thead class="table-primary">
        <tr>
            <th>User ID</th>
            <th>Full Name</th>
            <th>Email</th>
            <th>Mobile</th>
            <th>Aadhar</th>
            <th>Age</th>
            <th>Password</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user : ${users}">
            <td th:text="${user.id}">1</td>
            <td th:text="${user.fullname}">John Doe</td>
            <td th:text="${user.email}">john@example.com</td>
            <td th:text="${user.mobile}">9999999999</td>
            <td th:text="${user.aadhar}">123456789012</td>
            <td th:text="${user.age}">25</td>
            <td th:text="${user.password}">********</td>
            <td>
                <!-- Edit button -->
                <a th:href="@{/editUser/{userId}(userId=${user.id})}"
                   class="btn btn-sm btn-warning me-2">Edit</a>

                <!-- Delete button triggers modal -->
                <button type="button"
                        class="btn btn-danger btn-sm"
                        data-bs-toggle="modal"
                        data-bs-target="#deleteModal"
                        th:attr="data-userid=${user.id}">
                    Delete
                </button>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1"
     aria-labelledby="deleteModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"
                        aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Are you sure you want to delete this user?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    Cancel
                </button>
                <!-- Form dynamically updated by JS -->
                <form id="deleteForm" method="post" style="display:inline;">
                    <input type="hidden" name="_method" value="delete"/>
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>

            </div>
        </div>
    </div>
</div>

<script>
    var deleteModal = document.getElementById('deleteModal');
    deleteModal.addEventListener('show.bs.modal', function (event) {
        var button = event.relatedTarget; // Button that triggered the modal
        var userId = button.getAttribute('data-userid'); // Get the user ID
        var form = document.getElementById('deleteForm');
        form.setAttribute('action', '/delete/' + userId); // Set form action dynamically
    });
</script>







<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>












<!--<!DOCTYPE html>-->
<!--<html xmlns:th="http://www.thymeleaf.org" lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title>Users List</title>-->
<!--    &lt;!&ndash; Bootstrap CSS &ndash;&gt;-->
<!--    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"-->
<!--          rel="stylesheet">-->
<!--</head>-->
<!--<body class="bg-light">-->

<!--&lt;!&ndash; Navbar &ndash;&gt;-->
<!--<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow">-->
<!--    <div class="container">-->
<!--        <a class="navbar-brand fw-bold" href="/">Manish</a>-->
<!--        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"-->
<!--                data-bs-target="#navbarNav">-->
<!--            <span class="navbar-toggler-icon"></span>-->
<!--        </button>-->
<!--        <div id="navbarNav" class="collapse navbar-collapse">-->
<!--            <ul class="navbar-nav ms-auto">-->
<!--                <li class="nav-item"><a class="nav-link" href="/">Home</a></li>-->
<!--                <li class="nav-item"><a class="nav-link active" href="/form">Add User</a></li>-->
<!--                <li class="nav-item"><a class="nav-link" href="/users">View Users</a></li>-->
<!--                <li class="nav-item"><a class="nav-link" href="/about">About</a></li>-->
<!--            </ul>-->
<!--        </div>-->
<!--    </div>-->
<!--</nav>-->

<!--&lt;!&ndash; Users Table &ndash;&gt;-->
<!--<div class="container mt-5">-->
<!--    <div class="card shadow-lg border-0 rounded-4 p-4">-->
<!--        <h2 class="text-center text-primary mb-4">Registered Users</h2>-->

<!--        &lt;!&ndash; Show message if no users &ndash;&gt;-->
<!--        <div th:if="${#lists.isEmpty(users)}" class="alert alert-info text-center">-->
<!--            No users found.-->
<!--        </div>-->

<!--        &lt;!&ndash; User Table &ndash;&gt;-->
<!--        <div th:if="${!#lists.isEmpty(users)}" class="table-responsive">-->
<!--            <table class="table table-hover align-middle">-->
<!--                <thead class="table-primary">-->
<!--                <tr>-->
<!--                    <th>User ID</th>-->
<!--                    <th>Full Name</th>-->
<!--                    <th>Email</th>-->
<!--                    <th>Mobile</th>-->
<!--                    <th>Aadhar</th>-->
<!--                    <th>Age</th>-->
<!--                    <th>Password</th>-->
<!--                    <th>Actions</th>-->
<!--                </tr>-->
<!--                </thead>-->
<!--                <tbody>-->
<!--                <tr th:each="user : ${users}">-->
<!--                    <td th:text="${user.id}">1</td>-->
<!--                    <td th:text="${user.fullname}">John Doe</td>-->
<!--                    <td th:text="${user.email}">john@example.com</td>-->
<!--                    <td th:text="${user.mobile}">9999999999</td>-->
<!--                    <td th:text="${user.aadhar}">123456789012</td>-->
<!--                    <td th:text="${user.age}">25</td>-->
<!--                    <td th:text="${user.password}">25</td>-->
<!--                    <td>-->
<!--                        &lt;!&ndash; Edit button &ndash;&gt;-->
<!--                        <a th:href="@{/editUser/{userId}(userId=${user.id})}"-->
<!--                           class="btn btn-sm btn-warning me-2">Edit</a>-->



<!--                        &lt;!&ndash; Delete button with confirmation &ndash;&gt;-->
<!--                        <form th:action="@{'/delete/' + ${user.id}}" method="post" style="display:inline;">-->
<!--                            <input type="hidden" name="_method" value="delete"/>-->
<!--                            <button type="submit" class="btn btn-danger btn-sm"-->
<!--                                    data-bs-toggle="modal"-->
<!--                                    data-bs-target="#deleteModal"-->
<!--                                    th:attr="data-userid=${user.id}">-->
<!--                                Delete-->
<!--                            </button>-->
<!--                        </form>-->




<!--                    </td>-->
<!--                </tr>-->
<!--                </tbody>-->
<!--            </table>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->
<!--&lt;!&ndash; Delete Confirmation Modal &ndash;&gt;-->
<!--<div class="modal fade" id="deleteModal" tabindex="-1"-->
<!--     aria-labelledby="deleteModalLabel"-->
<!--     aria-hidden="true">-->
<!--    <div class="modal-dialog modal-dialog-centered">-->
<!--        <div class="modal-content">-->
<!--            <div class="modal-header bg-danger text-white">-->
<!--                <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>-->
<!--                <button type="button" class="btn-close" data-bs-dismiss="modal"-->
<!--                        aria-label="Close"></button>-->
<!--            </div>-->
<!--            <div class="modal-body">-->
<!--                Are you sure you want to delete this user?-->
<!--            </div>-->
<!--            <div class="modal-footer">-->
<!--                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">-->
<!--                    Cancel-->
<!--                </button>-->
<!--                <form id="deleteForm" method="post" style="display:inline;">-->
<!--                    <button type="submit" class="btn btn-danger">Delete</button>-->
<!--                </form>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--&lt;!&ndash; Bootstrap JS &ndash;&gt;-->
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>-->
<!--<script>-->
<!--    var deleteModal = document.getElementById('deleteModal');-->
<!--    deleteModal.addEventListener('show.bs.modal', function (event) {-->
<!--        var button = event.relatedTarget; // Button that triggered the modal-->
<!--        var userId = button.getAttribute('data-userid'); // Get the user ID-->
<!--        var form = document.getElementById('deleteForm');-->
<!--        form.setAttribute('action', '/delete/' + userId); // Set form action dynamically-->
<!--    });-->
<!--</script>-->

<!--</body>-->
<!--</html>-->
